// ===== PRODUCT DATA =====
const productsData = {
    "bundles": [
        {
            id: 801,
            name: "Full Heritage Set",
            description: "Includes: Necklace, Earrings & Mantika<br>Product ID: 801",
            price: 65.00,
            images: [
                "Bundle/1/Mainimage.png",
                "Bundle/1/Manakin.png"
            ],
            status: "in-stock",
            category: "bundles"
        },
        {
            id: 802,
            name: "Full Heritage Set",
            description: "Includes: Necklace, Earrings & Mantika<br>Product ID: 802",
            price: 60.00,
            images: [
                "Bundle/2/Mainimage.png"
            ],
            status: "in-stock",
            category: "bundles"
        },
        {
            id: 803,
            name: "Full Heritage Set",
            description: "Includes: Necklace, Earrings & Mantika<br>Product ID: 803",
            price: 60.00,
            images: [
                "Bundle/3/Mainimage.jpg"
            ],
            status: "in-stock",
            category: "bundles"
        },
        {
            id: 804,
            name: "Full Heritage Set",
            description: "Includes: Necklace, Earrings & Mantika<br>Product ID: 804",
            price: 75.00,
            images: [
                "Bundle/4/Mainimage.jpg"
            ],
            status: "in-stock",
            category: "bundles"
        },
        {
        id: 805,
            name: "Earring and Necklace Set",
            description: "Includes: Necklace and Earrings<br>Product ID: 805",
            price: 35.00,
            images: [
                "Bundle/5/Mainimage.png",
                "Bundle/5/Manakin.png"
            ],
            status: "in-stock",
            category: "bundles"
        },
        {
        id: 806,
            name: "Earring and Necklace Set",
            description: "Includes: Necklace and Earrings<br>Product ID: 806",
            price: 25.00,
            images: [
                "Bundle/6/Mainimage.jpg",
                "Bundle/6/Manakin.png"
            ],
            status: "in-stock",
            category: "bundles"
        },
        {
        id: 807,
            name: "Earring and Necklace Set",
            description: "Includes: Necklace and Earrings<br>Product ID: 807",
            price: 25.00,
            images: [
                "Bundle/7/Mainimage.png",
                "Bundle/7/Manakin.png"
            ],
            status: "in-stock",
            category: "bundles"
        },
        {
        id: 808,
            name: "Earring and Necklace Set",
            description: "Includes: Necklace and Earrings<br>Product ID: 808",
            price: 35.00,
            images: [
                "Bundle/8/mainimage.png",
                "Bundle/8/manikin.png"
            ],
            status: "in-stock",
            category: "bundles"
        },
        {
        id: 809,
            name: "Earring and Necklace Set",
            description: "Includes: Necklace and Earrings<br>Product ID: 809",
            price: 35.00,
            images: [
                "Bundle/9/Mainimage.png",
                "Bundle/9/Manakin.png"
            ],
            status: "in-stock",
            category: "bundles"
        },
        {
        id: 810,
            name: "Earring and Necklace Set",
            description: "Includes: Necklace and Earrings<br>Product ID: 810",
            price: 40.00,
            images: [
                "Bundle/10/Mainimage.png",
                "Bundle/10/Manakin.png"
            ],
            status: "in-stock",
            category: "bundles"
        },
        {
        id: 811,
            name: "Earring and Necklace Set",
            description: "Includes: Necklace and Earrings<br>Product ID: 811",
            price: 35.00,
            images: [
                "Bundle/11/Mainimage.png",
                "Bundle/11/Manakin.png"
            ],
            status: "in-stock",
            category: "bundles"
        },
        {
        id: 812,
            name: "Earring and Necklace Set",
            description: "Includes: Necklace and Earrings<br>Product ID: 812",
            price: 35.00,
            images: [
                "Bundle/12/Mainimage.png",
                "Bundle/12/Manakin.png"
            ],
            status: "in-stock",
            category: "bundles"
        },
        {
        id: 813,
            name: "Earring and Necklace Set",
            description: "Includes: Necklace and Earrings<br>Product ID: 813",
            price: 30.00,
            images: [
                "Bundle/13/Mainimage.png",
                "Bundle/13/Manakin.png"
            ],
            status: "in-stock",
            category: "bundles"
        },
        {
        id: 814,
            name: "Earring and Necklace Set",
            description: "Includes: Necklace and Earrings<br>Product ID: 814",
            price: 45.00,
            images: [
                "Bundle/14/Mainimage.png",
                "Bundle/14/Manakin.png"
            ],
            status: "in-stock",
            category: "bundles"
        },
        {
        id: 815,
            name: "Earring and Necklace Set",
            description: "Includes: Necklace and Earrings<br>Product ID: 815",
            price: 30.00,
            images: [
                "Bundle/15/Mainimage.png",
                "Bundle/15/Manakin.png"
            ],
            status: "in-stock",
            category: "bundles"
        },
        {
        id: 816,
            name: "Earring and Necklace Set",
            description: "Includes: Necklace and Earrings<br>Product ID: 816",
            price: 25.00,
            images: [
                "Bundle/16/Mainimage.png",
                "Bundle/16/Manakin.png"
            ],
            status: "in-stock",
            category: "bundles"
        },
        {
        id: 817,
            name: "Earring and Necklace Set",
            description: "Includes: Necklace and Earrings<br>Product ID: 817",
            price: 55.00,
            images: [
                "Bundle/17/Mainimage.png",
                "Bundle/17/Manakin.png"
            ],
            status: "in-stock",
            category: "bundles"
        },
        {
        id: 818,
            name: "Earring and Necklace Set",
            description: "Includes: Necklace and Earrings<br>Product ID: 818",
            price: 65.00,
            images: [
                "Bundle/18/Mainimage.png",
                "Bundle/18/Manakin.png"
            ],
            status: "in-stock",
            category: "bundles"
        },
        {
        id: 819,
            name: "Earring and Necklace Set",
            description: "Includes: Necklace and Earrings<br>Product ID: 819",
            price: 55.00,
            images: [
                "Bundle/19/Mainimage.png",
                "Bundle/19/Manakin.png"
            ],
            status: "in-stock",
            category: "bundles"
        },
        
        
    ],

    "necklaces": [
        {
            id: 901,
            name: "Necklace",
            description: "Includes: Necklace</br>Product ID: 901",
            price: 10.00,
            images: ["Necklace/1/Mainimage.png", "Necklace/1/Manakin.png"],
            status: "in-stock",
            category: "necklaces"
        },
        {
            id: 902,
            name: "Necklace",
            description: "Includes: Necklace</br>Product ID: 902",
            price: 10.00,
            images: ["Necklace/2/Mainimage.png", "Necklace/2/Manakin.png"],
            status: "in-stock",
            category: "necklaces"
        },
        {
            id: 903,
            name: "Necklace",
            description: "Includes: Necklace</br>Product ID: 903",
            price: 10.00,
            images: ["Necklace/3/Mainimage.png", "Necklace/3/Manakin.png"],
            status: "in-stock",
            category: "necklaces"
        },
        {
            id: 904,
            name: "Necklace",
            description: "Includes: Necklace</br>Product ID: 904",
            price: 10.00,
            images: ["Necklace/4/Mainimage.png", "Necklace/4/Manakin.png"],
            status: "in-stock",
            category: "necklaces"
        },
        {
            id: 905,
            name: "Necklace",
            description: "Includes: Necklace</br>Product ID: 905",
            price: 10.00,
            images: ["Necklace/5/Mainimage.png", "Necklace/5/Manakin.png"],
            status: "in-stock",
            category: "necklaces"
        },
        {
            id: 906,
            name: "Necklace",
            description: "Includes: Necklace</br>Product ID: 906",
            price: 10.00,
            images: ["Necklace/6/Mainimage.png", "Necklace/6/Manakin.png"],
            status: "in-stock",
            category: "necklaces"
        },
        {
            id: 907,
            name: "Necklace",
            description: "Includes: Necklace</br>Product ID: 907",
            price: 10.00,
            images: ["Necklace/7/Mainimage.png", "Necklace/7/Manakin.png"],
            status: "in-stock",
            category: "necklaces"
        },
        {
            id: 908,
            name: "Necklace",
            description: "Includes: Necklace</br>Product ID: 908",
            price: 10.00,
            images: ["Necklace/8/Mainimage.png", "Necklace/8/Manakin.png"],
            status: "in-stock",
            category: "necklaces"
        },
        {
            id: 909,
            name: "Necklace",
            description: "Includes: Necklace</br>Product ID: 909",
            price: 10.00,
            images: ["Necklace/9/Mainimage.png", "Necklace/9/Manakin.png"],
            status: "in-stock",
            category: "necklaces"
        },
        {
            id: 910,
            name: "Necklace",
            description: "Includes: Necklace</br>Product ID: 910",
            price: 10.00,
            images: ["Necklace/10/Mainimage.png", "Necklace/10/Manakin.png"],
            status: "in-stock",
            category: "necklaces"
        },
        {
            id: 911,
            name: "Necklace",
            description: "Includes: Necklace</br>Product ID: 911",
            price: 10.00,
            images: ["Necklace/11/Mainimage.png", "Necklace/11/Manakin.png"],
            status: "in-stock",
            category: "necklaces"
        }
    ],

    "bracelets": [
        {
            id: 101,
            name: "Bracelet",
            description: "Includes: Bracelet</br>Product ID: 101",
            price: 30.00,
            images: ["Bracelet/1/Mainimage.png", "Bracelet/1/Manakin.png"],
            status: "in-stock",
            category: "bracelets"
        },
        {
            id: 102,
            name: "Bracelet",
            description: "Includes:Bracelet</br>Product ID: 102",
            price: 35.00,
            images: ["Bracelet/2/Mainimage.png", "Bracelet/2/Manakin.png"],
            status: "in-stock",
            category: "bracelets"
        },
        {
            id: 103,
            name: "Watch Bracelet",
            description: "Includes: Watch Bracelet</br>Product ID: 103",
            price: 25.00,
            images: ["Bracelet/3/Mainimage.png", "Bracelet/3/Manakin.png"],
            status: "in-stock",
            category: "bracelets"
        },
        {
            id: 104,
            name: "Bracelet",
            description: "Includes: Bracelet</br>Product ID: 104",
            price: 30.00,
            images: ["Bracelet/4/Mainimage.png", "Bracelet/4/Manakin.png"],
            status: "in-stock",
            category: "bracelets"
        },
        {
            id: 105,
            name: "Bracelet",
            description: "Includes: Bracelet</br>Product ID: 105",
            price: 15.00,
            images: ["Bracelet/5/Mainimage.png", "Bracelet/5/Manakin.png"],
            status: "in-stock",
            category: "bracelets"
        },
        {
            id: 106,
            name: "Bracelet",
            description: "Includes: Bracelet</br>Product ID: 106",
            price: 15.00,
            images: ["Bracelet/6/Mainimage.png", "Bracelet/6/Manakin.png"],
            status: "in-stock",
            category: "bracelets"
        },
        {
            id: 107,
            name: "Bracelet",
            description: "Includes: Bracelet</br>Product ID: 107",
            price: 15.00,
            images: ["Bracelet/7/Mainimage.png", "Bracelet/7/Manakin.png"],
            status: "in-stock",
            category: "bracelets"
        },
        {
            id: 108,
            name: "Hand Bracelet",
            description: "Includes: Bracelet</br>Product ID: 108",
            price: 15.00,
            images: ["Bracelet/8/Mainimage.png", "Bracelet/8/Manakin.png"],
            status: "in-stock",
            category: "bracelets"
        },
        {
            id: 109,
            name: "Hand Bracelet",
            description: "Includes: Bracelet</br>Product ID: 109",
            price: 25.00,
            images: ["Bracelet/9/Mainimage.png", "Bracelet/9/Manakin.png"],
            status: "in-stock",
            category: "bracelets"
        },
        {
            id: 110,
            name: "Mangalsutra Bracelet",
            description: "Includes: Mangalsutra Bracelet</br>Product ID: 110",
            price: 10.00,
            images: ["Bracelet/10/Mainimage.png", "Bracelet/10/Manakin.png"],
            status: "in-stock",
            category: "bracelets"
        },
        {
            id: 111,
            name: "Mangalsutra Bracelet",
            description: "Includes: Mangalsutra Bracelet</br>Product ID: 111",
            price: 10.00,
            images: ["Bracelet/11/Mainimage.png", "Bracelet/11/Manakin.png"],
            status: "in-stock",
            category: "bracelets"
        },
        {
            id: 112,
            name: "Mangalsutra Bracelet",
            description: "Includes: Mangalsutra Bracelet</br>Product ID: 112",
            price: 10.00,
            images: ["Bracelet/12/Mainimage.png", "Bracelet/12/Manakin.png"],
            status: "in-stock",
            category: "bracelets"
        },
        {
            id: 113,
            name: "Bracelet",
            description: "Includes: Bracelet</br>Product ID: 113",
            price: 10.00,
            images: ["Bracelet/13/Mainimage.png", "Bracelet/13/Manakin.png"],
            status: "in-stock",
            category: "bracelets"
        },
        {
            id: 114,
            name: "Bracelet",
            description: "Includes: Bracelet</br>Product ID: 114",
            price: 10.00,
            images: ["Bracelet/14/Mainimage.png", "Bracelet/14/Manakin.png"],
            status: "in-stock",
            category: "bracelets"
        },
        {
            id: 115,
            name: "Bracelet with Ring",
            description: "Includes: Bracelet with Ring</br>Product ID: 115",
            price: 30.00,
            images: ["Bracelet/15/MainImage.png", "Bracelet/15/Manakin.png"],
            status: "in-stock",
            category: "bracelets"
        },
    ],
    "mang-tikka": [
        {
            id: 201,
            name: "Mang Tikka",
            description: "Includes: Mang Tikka</br>Product ID: 201",
            price: 20.00,
            images: ["Mandtikka/1/Mainimage.png"],
            status: "in-stock",
            category: "mang-tikka"
        },
        {
            id: 202,
            name: "Mang Tikka",
            description: "Includes: Mang Tikka</br>Product ID: 202",
            price: 25.00,
            images: ["Mandtikka/2/Mainimage.png"],
            status: "in-stock",
            category: "Mang-tikka"
        },
        {
            id: 203,
            name: "Mang Tikka",
            description: "Includes: Mang Tikka</br>Product ID: 203",
            price: 25.00,
            images: ["Mandtikka/3/Mainimage.png"],
            status: "in-stock",
            category: "mang-tikka"
        },
        {
            id: 204,
            name: "Mang Tikka",
            description: "Includes: Mang Tikka</br>Product ID: 204",
            price: 25.00,
            images: ["Mandtikka/4/Mainimage.png"],
            status: "in-stock",
            category: "mang-tikka"
        },
    ],
    "pendants": [
        {
            id: 301,
            name: "Pendant",
            description: "Includes: Pendant</br>Product ID: 301",
            price: 10.00,
            images: ["Pandant/1/Mainimage.png"],
            status: "in-stock",
            category: "pendants"
        },
        {
            id: 302,
            name: "Pendant",
            description: "Includes: Pendant</br>Product ID: 302",
            price: 10.00,
            images: ["Pandant/2/Mainimage.png"],
            status: "in-stock",
            category: "pendants"
        },
    ],

    "earrings": [
        {
            id: 401,
            name: "Earrings",
            description: "Includes: Earrings</br>Product ID: 401",
            price: 25.00,
            images: ["earring/1/Mainimage.png"],
            status: "in-stock",
            category: "earrings"
        },
        {
            id: 402,
            name: "Earrings",
            description: "Includes: Earrings</br>Product ID: 402",
            price: 25.00,
            images: ["earring/2/Mainimage.png"],
            status: "in-stock",
            category: "earrings"
        },
        {
            id: 403,
            name: "Earrings",
            description: "Includes: Earrings</br>Product ID: 403",
            price: 20.00,
            images: ["earring/3/Mainimage.png"],
            status: "in-stock",
            category: "earrings"
        },
        {
            id: 404,
            name: "Earrings",
            description: "Includes: Earrings</br>Product ID: 404",
            price: 20.00,
            images: ["earring/4/Mainimage.png"],
            status: "in-stock",
            category: "earrings"
        },
        {
            id: 405,
            name: "Earrings",
            description: "Includes: Earrings</br>Product ID: 405",
            price: 25.00,
            images: ["earring/5/Mainimage.png"],
            status: "in-stock",
            category: "earrings"
        },
        {
            id: 406,
            name: "Earrings",
            description: "Includes: Earrings</br>Product ID: 406",
            price: 10.00,
            images: ["earring/6/Mainimage.png"],
            status: "in-stock",
            category: "earrings"
        },
        {
            id: 407,
            name: "Earrings",
            description: "Includes: Earrings</br>Product ID: 407",
            price: 25.00,
            images: ["earring/7/Mainimage.png"],
            status: "in-stock",
            category: "earrings"
        },
        {
            id: 408,
            name: "Earrings",
            description: "Includes: Earrings</br>Product ID: 408",
            price: 20.00,
            images: ["earring/8/Mainimage.png"],
            status: "in-stock",
            category: "earrings"
        },
        {
            id: 409,
            name: "Earrings",
            description: "Includes: Earrings</br>Product ID: 409",
            price: 35.00,
            images: ["earring/9/Mainimage.png"],
            status: "in-stock",
            category: "earrings"
        }
    ],

    "rings": [
        {
            id: 501,
            name: "Dual Ring",
            description: "Include: Dual Ring</br>Product ID: 501",
            price: 25.00,
            images: ["ring/1/Mainimage.png"],
            status: "in-stock",
            category: "rings"
        },
        {
            id: 502,
            name: "Dual Ring",
            description: "Include: Dual Ring</br>Product ID: 502",
            price: 25.00,
            images: ["ring/2/Mainimage.png"],
            status: "in-stock",
            category: "rings"
        },
        {
            id: 503,
            name: "Ring",
            description: "Include: Ring</br>Product ID: 503",
            price: 15.00,
            images: ["ring/3/Mainimage.png"],
            status: "in-stock",
            category: "rings"
        },
        {
            id: 504,
            name: "Ring",
            description: "Include: Ring</br>Product ID: 504",
            price: 10.00,
            images: ["ring/4/Mainimage.png"],
            status: "in-stock",
            category: "rings"
        },
        {
            id: 505,
            name: "Ring",
            description: "Include: Ring</br>Product ID: 505",
            price: 15.00,
            images: ["ring/5/Mainimage.png"],
            status: "in-stock",
            category: "rings"
        },
        {
            id: 506,
            name: "Ring",
            description: "Include: Ring</br>Product ID: 506",
            price: 15.00,
            images: ["ring/6/Mainimage.png"],
            status: "in-stock",
            category: "rings"
        },
        {
            id: 507,
            name: "Ring",
            description: "Include: Ring</br>Product ID: 507",
            price: 10.00,
            images: ["ring/7/Mainimage.png"],
            status: "in-stock",
            category: "rings"
        },
        {
            id: 508,
            name: "Ring",
            description: "Include: Ring</br>Product ID: 508",
            price: 10.00,
            images: ["ring/8/Mainimage.png"],
            status: "in-stock",
            category: "rings"
        },
        {
            id: 509,
            name: "Ring",
            description: "Include: Ring</br>Product ID: 509",
            price: 15.00,
            images: ["ring/9/Mainimage.png"],
            status: "in-stock",
            category: "rings"
        },
        {
            id: 510,
            name: "Ring",
            description: "Include: Ring</br>Product ID: 510",
            price: 20.00,
            images: ["ring/10/Mainimage.png"],
            status: "in-stock",
            category: "rings"
        },
        {
            id: 511,
            name: "Ring",
            description: "Include: Ring</br>Product ID: 511",
            price: 15.00,
            images: ["ring/11/Mainimage.png"],
            status: "in-stock",
            category: "rings"
        },
        {
            id: 512,
            name: "Ring",
            description: "Include: Ring</br>Product ID: 512",
            price: 20.00,
            images: ["ring/12/Mainimage.png"],
            status: "in-stock",
            category: "rings"
        },
        {
            id: 513,
            name: "Ring",
            description: "Include: Ring</br>Product ID: 513",
            price: 25.00,
            images: ["ring/13/Mainimage.png"],
            status: "in-stock",
            category: "rings"
        },
        {
            id: 514,
            name: "Ring",
            description: "Include: Ring</br>Product ID: 514",
            price: 20.00,
            images: ["ring/14/Mainimage.png"],
            status: "in-stock",
            category: "rings"
        },
        {
            id: 515,
            name: "Ring",
            description: "Include: Ring</br>Product ID: 515",
            price: 15.00,
            images: ["ring/15/Mainimage.png"],
            status: "in-stock",
            category: "rings"
        },
        {
            id: 516,
            name: "Ring",
            description: "Include: Ring</br>Product ID: 516",
            price: 15.00,
            images: ["ring/16/Mainimage.png"],
            status: "in-stock",
            category: "rings"
        },
        {
            id: 517,
            name: "Ring",
            description: "Include: Ring</br>Product ID: 517",
            price: 15.00,
            images: ["ring/17/Mainimage.png"],
            status: "in-stock",
            category: "rings"
        },
        {
            id: 518,
            name: "Ring",
            description: "Include: Ring</br>Product ID: 518",
            price: 15.00,
            images: ["ring/18/Mainimage.png"],
            status: "in-stock",
            category: "rings"
        },
        {
            id: 519,
            name: "Ring",
            description: "Include: Ring</br>Product ID: 519",
            price: 20.00,
            images: ["ring/19/MainImage.png"],
            status: "in-stock",
            category: "rings"
        },
        {
            id: 520,
            name: "Ring",
            description: "Include: Ring</br>Product ID: 520",
            price: 20.00,
            images: ["ring/20/MainImage.png"],
            status: "in-stock",
            category: "rings"
        }
        
    ],

    "bangles": [
        {
            id: 601,
            name: "Bangle",
            description: "Includes: Bangle</br>Product ID: 601",
            price: 35.00,
            images: ["Bangle/1/Mainimage.png", "Bangle/1/Manakin.png"],
            status: "in-stock",
            category: "bangles"
        },
        {
            id: 602,
            name: "Bangle",
            description: "Includes: Bangle</br>Product ID: 602",
            price: 35.00,
            images: ["Bangle/2/Mainimage.png", "Bangle/2/Manakin.png"],
            status: "in-stock",
            category: "bangles"
        },
        {
            id: 603,
            name: "Bangle",
            description: "Includes: Bangle</br>Product ID: 603",
            price: 35.00,
            images: ["Bangle/3/Mainimage.png", "Bangle/3/Manakin.png"],
            status: "in-stock",
            category: "bangles"
        },
        {
            id: 604,
            name: "Bangle",
            description: "Includes: Bangle</br>Product ID: 604",
            price: 35.00,
            images: ["Bangle/4/Mainimage.png", "Bangle/4/Manakin.png"],
            status: "in-stock",
            category: "bangles"
        },
        {
            id: 605,
            name: "Bangle",
            description: "Includes: Bangle</br>Product ID: 605",
            price: 35.00,
            images: ["Bangle/5/Mainimage.png", "Bangle/5/Manakin.png"],
            status: "in-stock",
            category: "bangles"
        },
        {
            id: 606,
            name: "Bangle",
            description: "Includes: Bangle</br>Product ID: 606",
            price: 35.00,
            images: ["Bangle/6/Mainimage.png", "Bangle/6/Manakin.png"],
            status: "in-stock",
            category: "bangles"
        },
        {
            id: 607,
            name: "Bangle",
            description: "Includes: Bangle</br>Product ID: 607",
            price: 15.00,
            images: ["Bangle/7/Mainimage.png", "Bangle/7/Manakin.png"],
            status: "in-stock",
            category: "bangles"
        },
        {
            id: 608,
            name: "Bangle",
            description: "Includes: Bangle</br>Product ID: 608",
            price: 30.00,
            images: ["Bangle/8/Mainimage.png", "Bangle/8/Manakin.png"],
            status: "in-stock",
            category: "bangles"
        },
        {
            id: 609,
            name: "Bangle",
            description: "Includes: Bangle</br>Product ID: 609",
            price: 25.00,
            images: ["Bangle/9/Mainimage.png", "Bangle/9/Manakin.png"],
            status: "in-stock",
            category: "bangles"
        },
        {
            id: 610,
            name: "Bangle",
            description: "Includes: Bangle</br>Product ID: 610",
            price: 30.00,
            images: ["Bangle/10/Mainimage.png", "Bangle/10/Manakin.png"],
            status: "in-stock",
            category: "bangles"
        },
        {
            id: 611,
            name: "Bangle",
            description: "Includes: Bangle</br>Product ID: 611",
            price: 30.00,
            images: ["Bangle/11/Mainimage.png", "Bangle/11/Manakin.png"],
            status: "in-stock",
            category: "bangles"
        },
        {
            id: 612,
            name: "Bangle",
            description: "Includes: Bangle</br>Product ID: 612",
            price: 35.00,
            images: ["Bangle/12/Mainimage.png", "Bangle/12/Manakin.png"],
            status: "in-stock",
            category: "bangles"
        },
        {
            id: 613,
            name: "Bangle",
            description: "Includes: Bangle</br>Product ID: 613",
            price: 40.00,
            images: ["Bangle/13/Mainimage.png", "Bangle/13/Manakin.png"],
            status: "in-stock",
            category: "bangles"
        },
    ],

    "kamarband": [
                {
            id: 701,
            name: "Kamarband",
            description: "Includes: Kamarband</br>Product ID: 701",
            price: 40.00,
            images: ["Kamarband/1/Mainimage.png"],
            status: "in-stock",
            category: "kamarband"
        },
        {
            id: 702,
            name: "Kamarband",
            description: "Includes: Kamarband</br>Product ID: 702",
            price: 30.00,
            images: ["Kamarband/2/Mainimage.png"],
            status: "in-stock",
            category: "kamarband"
        },
        {
            id: 703,
            name: "Kamarband",
            description: "Includes: Kamarband</br>Product ID: 703",
            price: 25.00,
            images: ["Kamarband/3/Mainimage.png"],
            status: "in-stock",
            category: "kamarband"
        },
        {
            id: 704,
            name: "Kamarband",
            description: "Includes: Kamarband</br>Product ID: 704",
            price: 50.00,
            images: ["Kamarband/4/Mainimage.png"],
            status: "in-stock",
            category: "kamarband"
        }
    ]
};

// ===== GLOBAL STATE =====
let currentCategory = "bundles";
let currentSort = "price-low";
let displayedCount = 0;
const productsPerLoad = 6;
let allProducts = [];
let isLoading = false;

// ===== UTILITY FUNCTIONS =====

function formatPrice(price) {
    return `$${price.toFixed(2)}`;
}

function sortProducts(products, sortBy) {
    const sorted = [...products];
    
    switch(sortBy) {
        case 'price-low':
            return sorted.sort((a, b) => a.price - b.price);
        case 'price-high':
            return sorted.sort((a, b) => b.price - a.price);
        default:
            return sorted;
    }
}

function generateProductHTML(product) {
    const imageCount = product.images ? product.images.length : 0;
    const firstImage = product.images && product.images.length > 0 
        ? product.images[0] 
        : 'https://via.placeholder.com/300x400/EEE1C6/666?text=' + encodeURIComponent(product.name);
    
    return `
    <div class="product-card" data-product-id="${product.id}" data-product-category="${product.category}">
        <div class="product-image" onclick="window.location.href='product.html?id=${product.id}'">
            <img src="${firstImage}" 
                 alt="${product.name}" 
                 loading="lazy"
                 onerror="this.src='https://via.placeholder.com/300x400/EEE1C6/666?text=${encodeURIComponent(product.name)}'">
            <div class="status-badge ${product.status}">
                ${product.status === 'in-stock' ? 'In Stock' : 'Sold Out'}
            </div>
            ${imageCount > 1 ? `
                <div class="image-count-badge">
                    <i class="fas fa-images"></i> ${imageCount}
                </div>
            ` : ''}
        </div>
        <div class="product-info">
            <h3 class="product-name">${product.name}</h3>
            <div class="product-description">${product.description}</div>
            <div class="price">${formatPrice(product.price)}</div>
        </div>
        ${imageCount > 1 ? `
        <div class="product-thumbnails">
            ${product.images.slice(1, 4).map((img, index) => `
                <div class="thumbnail" data-image="${img}" onclick="event.stopPropagation(); window.location.href='product.html?id=${product.id}'">
                    <img src="${img}" 
                         alt="${product.name} - View ${index + 2}"
                         onerror="this.src='https://via.placeholder.com/60x60/EEE1C6/666?text=View+${index + 2}'">
                </div>
            `).join('')}
            ${imageCount > 4 ? `<div class="thumbnail more-images" onclick="window.location.href='product.html?id=${product.id}'">+${imageCount - 4}</div>` : ''}
        </div>
        ` : ''}
    </div>
    `;
}

// ===== CORE FUNCTIONS =====

function loadMoreProducts() {
    if (isLoading || displayedCount >= allProducts.length) {
        return;
    }
    
    isLoading = true;
    const productsGrid = document.getElementById('products-grid');
    const loadMoreContainer = document.querySelector('.load-more-container');
    
    // Show different loading indicators based on device
    if (window.innerWidth <= 768) {
        // Mobile: show inline loading indicator
        const loadingHTML = `
            <div class="mobile-loading-indicator" style="grid-column: 1/-1; text-align: center; padding: 1rem; color: #666;">
                <i class="fas fa-spinner fa-spin"></i> Loading more...
            </div>
        `;
        productsGrid.insertAdjacentHTML('beforeend', loadingHTML);
    } else {
        // Desktop: show the original loading indicator
        const loadingHTML = `
            <div class="loading-products" style="grid-column: 1/-1;">
                <div class="loading-spinner"></div>
                <p>Loading more products...</p>
            </div>
        `;
        productsGrid.insertAdjacentHTML('beforeend', loadingHTML);
    }
    
    // Simulate network delay for smooth UX
    setTimeout(() => {
        // Remove loading indicator
        const loadingEl = productsGrid.querySelector('.loading-products, .mobile-loading-indicator');
        if (loadingEl) loadingEl.remove();
        
        // Get next batch
        const nextBatch = allProducts.slice(displayedCount, displayedCount + productsPerLoad);
        
        // Generate and append HTML
        nextBatch.forEach(product => {
            productsGrid.insertAdjacentHTML('beforeend', generateProductHTML(product));
        });
        
        // Update counter
        displayedCount += nextBatch.length;
        
        // Add thumbnail events to new products
        addThumbnailEvents();

        // Add product card click events
        setTimeout(addProductCardEvents, 50);
        
        // Hide load more button if all products shown
        updateLoadMoreButton();
        
        isLoading = false;
        
        // On mobile, if we just loaded products, check if we need to load more
        // (in case the new content doesn't fill the screen)
        if (window.innerWidth <= 768 && nextBatch.length > 0) {
            setTimeout(() => {
                const viewportHeight = window.innerHeight;
                const contentHeight = document.documentElement.scrollHeight;
                const scrollPosition = window.scrollY;
        
                // MORE AGGRESSIVE: Load more if content is less than 1.2x viewport height
                // OR if user is already near the bottom
                const shouldLoadMore = 
                      contentHeight < viewportHeight * 1.2 ||  // Changed from 1.5 to 1.2
                     (scrollPosition > 0 && (contentHeight - scrollPosition - viewportHeight) < 300);
            
                if (shouldLoadMore && displayedCount < allProducts.length) {
                    console.log('Mobile: Content too short or user near bottom, auto-loading more...');
                    loadMoreProducts();
                }
            }, 100);
        }
    }, 500);
}
// Add to your product.js
function setupMobileScrollPrompt() {
    if (window.innerWidth > 768) return;
    
    const prompt = document.createElement('div');
    prompt.className = 'mobile-scroll-prompt';
    prompt.innerHTML = '<i class="fas fa-arrow-down"></i> Scroll for more';
    document.body.appendChild(prompt);
    
    let promptTimeout;
    
    // Show prompt when user is near bottom and there are more products
    function checkScrollPrompt() {
        if (displayedCount >= allProducts.length) {
            prompt.classList.remove('show');
            return;
        }
        
        const scrollPosition = window.innerHeight + window.scrollY;
        const pageHeight = document.documentElement.scrollHeight;
        const distanceFromBottom = pageHeight - scrollPosition;
        
        // Show prompt when user is 300px from bottom and there are more products
        if (distanceFromBottom < 300 && displayedCount < allProducts.length) {
            prompt.classList.add('show');
            
            // Auto-hide after 3 seconds
            clearTimeout(promptTimeout);
            promptTimeout = setTimeout(() => {
                prompt.classList.remove('show');
            }, 3000);
        } else {
            prompt.classList.remove('show');
        }
    }
    
    window.addEventListener('scroll', checkScrollPrompt);
    
    // Also hide prompt when products are loading
    const originalLoadMore = loadMoreProducts;
    loadMoreProducts = function() {
        prompt.classList.remove('show');
        return originalLoadMore.apply(this, arguments);
    };
}

// Call it in your DOMContentLoaded
document.addEventListener('DOMContentLoaded', function() {
    // ... your existing code ...
    
    setupMobileScrollPrompt();
});

function updateLoadMoreButton() {
    const loadMoreContainer = document.querySelector('.load-more-container');
    const loadMoreBtn = document.getElementById('load-more-btn');
    
    if (!loadMoreContainer || !loadMoreBtn) return;
    
    if (displayedCount >= allProducts.length) {
        // All products loaded - hide container on both mobile/desktop
        loadMoreContainer.style.display = 'none';
    } else {
        // Products remaining - show/hide based on device
        if (window.innerWidth <= 768) {
            // Mobile: hide button, use auto-scroll
            loadMoreContainer.style.display = 'none';
        } else {
            // Desktop: show button
            loadMoreContainer.style.display = 'block';
            const remaining = allProducts.length - displayedCount;
            loadMoreBtn.innerHTML = `<i class="fas fa-arrow-down"></i> Load More Products (${remaining} remaining)`;
        }
    }
}

function initializeProducts(category = "bundles", sortBy = "price-low") {
    const productsGrid = document.getElementById('products-grid');
    const productCount = document.getElementById('product-count');
    
    if (!productsGrid) return;
    
    // Reset state
    displayedCount = 0;
    currentCategory = category;
    currentSort = sortBy;
    
    // Get and sort products
    allProducts = productsData[category] || [];
    allProducts = sortProducts(allProducts, sortBy);
    
    // Update product count
    if (productCount) {
        productCount.textContent = `(${allProducts.length} items)`;
    }
    
    // Clear grid
    productsGrid.innerHTML = '';
    
    // Check if we have products
    if (allProducts.length === 0) {
        productsGrid.innerHTML = `
            <div class="no-products" style="grid-column: 1/-1;">
                <h3>No products available yet</h3>
                <p>Check back soon for new collections!</p>
            </div>
        `;
        return;
    }
    
    // Load first batch
    loadMoreProducts();

    // Add click events to product cards
    setTimeout(addProductCardEvents, 100);

    // Update sort dropdown
    const sortSelect = document.getElementById('sort-by');
    if (sortSelect) {
        sortSelect.value = sortBy;
    }
}

function addThumbnailEvents() {
    document.querySelectorAll('.thumbnail[data-image]').forEach(thumb => {
        // Remove existing listeners
        thumb.replaceWith(thumb.cloneNode(true));
    });
    
    // Add new listeners
    document.querySelectorAll('.thumbnail[data-image]').forEach(thumb => {
        thumb.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            
            const productCard = this.closest('.product-card');
            const mainImage = productCard.querySelector('.product-image img');
            const imageSrc = this.getAttribute('data-image');
            
            if (imageSrc && mainImage) {
                const originalSrc = mainImage.src;
                mainImage.src = imageSrc;
                this.setAttribute('data-image', originalSrc);
                
                const thumbImg = this.querySelector('img');
                if (thumbImg) {
                    thumbImg.src = originalSrc;
                }
                
                this.classList.add('active');
                setTimeout(() => this.classList.remove('active'), 300);
            }
        });
    });
}

function addProductCardEvents() {
    // Add click events to all product cards
    document.querySelectorAll('.product-card').forEach(card => {
        // Remove existing listeners
        card.removeEventListener('click', handleProductCardClick);
        
        // Add new listener
        card.addEventListener('click', handleProductCardClick);
    });
}

function handleProductCardClick(event) {
    // Don't trigger if clicking on thumbnails (they have their own handlers)
    if (event.target.closest('.thumbnail') || event.target.closest('.product-thumbnails')) {
        return;
    }
    
    const productCard = event.currentTarget;
    const productId = productCard.getAttribute('data-product-id');
    
    if (productId) {
        window.location.href = `product.html?id=${productId}`;
    }
}


function setupInfiniteScroll() {
    let scrollTimeout;
    let lastScrollPosition = 0;
    
    // First, hide the load more button on mobile initially
    const loadMoreBtn = document.getElementById('load-more-btn');
    const loadMoreContainer = document.querySelector('.load-more-container');
    
    if (window.innerWidth <= 768 && loadMoreContainer) {
        loadMoreContainer.style.display = 'none';
    }
    
    window.addEventListener('scroll', () => {
        clearTimeout(scrollTimeout);
        
        scrollTimeout = setTimeout(() => {
            // Don't load if already loading or all products shown
            if (isLoading || displayedCount >= allProducts.length) {
                return;
            }
            
            const scrollPosition = window.innerHeight + window.scrollY;
            const pageHeight = document.documentElement.scrollHeight;
            
            // EARLIER TRIGGER ON MOBILE - 150px instead of 300px
            const threshold = window.innerWidth <= 768 ? 150 : 800;
            
            // Also trigger when user is scrolling down (not up)
            const isScrollingDown = window.scrollY > lastScrollPosition;
            lastScrollPosition = window.scrollY;
            
            // Load more when near bottom AND scrolling down
            if (isScrollingDown && scrollPosition >= pageHeight - threshold) {
                console.log('Auto-loading more products...', {
                    scrollPosition,
                    pageHeight,
                    threshold,
                    remaining: pageHeight - scrollPosition
                });
                loadMoreProducts();
            }
        }, 50); // Faster check (50ms instead of 100ms)
    });
    
    // NEW: Also trigger load when user reaches 70% of page height on mobile
    if (window.innerWidth <= 768) {
        const checkEarlyLoad = () => {
            if (!isLoading && displayedCount < allProducts.length) {
                const scrollPosition = window.innerHeight + window.scrollY;
                const pageHeight = document.documentElement.scrollHeight;
                
                // Load when user has seen 70% of current content
                if (scrollPosition >= pageHeight * 0.7) {
                    console.log('Early load triggered at 70% of page');
                    loadMoreProducts();
                }
            }
        };
        
        // Check on scroll
        window.addEventListener('scroll', checkEarlyLoad);
        
        // Also check immediately in case page is too short
        setTimeout(checkEarlyLoad, 500);
    }
    
    // Handle window resize to show/hide button appropriately
    window.addEventListener('resize', function() {
        if (loadMoreContainer) {
            if (window.innerWidth <= 768) {
                // Mobile: hide button, use auto-scroll
                loadMoreContainer.style.display = 'none';
            } else {
                // Desktop: show button, also keep auto-scroll
                loadMoreContainer.style.display = 'block';
            }
        }
    });
}

// ===== INITIALIZATION =====

document.addEventListener('DOMContentLoaded', function() {
    // DETECT WHICH PAGE WE'RE ON BASED ON URL
    const path = window.location.pathname;
    let category = "bundles"; // Default
    
    if (path.includes("necklaces.html")) {
        category = "necklaces";
    } else if (path.includes("bracelets.html")) {
        category = "bracelets";
    } else if (path.includes("earrings.html")) {
        category = "earrings";
    } else if (path.includes("rings.html")) {
        category = "rings";
    } else if (path.includes("bangles.html")) {
        category = "bangles";
    } else if (path.includes("kamarband.html")) {
        category = "kamarband";
    } else if (path.includes("mang-tikka.html")) {  
        category = "mang-tikka";
    } else if (path.includes("pendants.html")) {   
        category = "pendants";
    }
    // 'bundles.html' or anything else defaults to "bundles"
    
    // Initialize products for the correct category
    initializeProducts(category, "price-low");
    
    // Setup infinite scroll (will handle mobile/desktop differences)
    setupInfiniteScroll();
    
    // Setup sort dropdown WITH ANIMATION
    const sortSelect = document.getElementById('sort-by');
    if (sortSelect) {
        sortSelect.addEventListener('change', function() {
            const productsGrid = document.getElementById('products-grid');
            
            // Add sorting animation class
            productsGrid.classList.add('sorting');
            
            // Wait for fade out, then reload
            setTimeout(() => {
                initializeProducts(category, this.value);
                
                // Remove sorting class after products load
                setTimeout(() => {
                    productsGrid.classList.remove('sorting');
                }, 100);
            }, 300);
        });
    }
    
    // Setup Load More button (if it exists) - only for desktop
    const loadMoreBtn = document.getElementById('load-more-btn');
    if (loadMoreBtn && window.innerWidth > 768) {
        loadMoreBtn.addEventListener('click', function() {
            loadMoreProducts();
        });
    }
    
    // On mobile, also check if we need to load more immediately
    // (in case initial batch doesn't fill the screen)
    if (window.innerWidth <= 768) {
        setTimeout(() => {
            const viewportHeight = window.innerHeight;
            const contentHeight = document.documentElement.scrollHeight;
            
            if (contentHeight < viewportHeight * 1.5 && displayedCount < allProducts.length) {
                console.log('Initial content too short on mobile, auto-loading more...');
                loadMoreProducts();
            }
        }, 500);
    }
});

// MOBILE DROPDOWN FIX - SIMPLE VERSION
document.addEventListener('DOMContentLoaded', function() {
    const filterSelect = document.querySelector('.filter-select');
    
    if (!filterSelect) return;
    
    // Only run on mobile
    if (window.innerWidth > 768) return;
    
    console.log('Mobile device detected, applying dropdown fix');
    
    // Force width to be 100% on mobile
    filterSelect.style.width = '100%';
    filterSelect.style.maxWidth = '100%';
    
    // Update on resize/orientation change
    window.addEventListener('resize', function() {
        if (window.innerWidth <= 768) {
            filterSelect.style.width = '100%';
            filterSelect.style.maxWidth = '100%';
        } else {
            filterSelect.style.width = '';
            filterSelect.style.maxWidth = '';
        }
    });
    
    // Special handling for Chrome on focus
    if (/Chrome/.test(navigator.userAgent) && /Mobile/.test(navigator.userAgent)) {
        console.log('Chrome mobile detected');
        
        filterSelect.addEventListener('focus', function() {
            // When dropdown opens, make it full viewport width
            this.style.width = '100vw';
            this.style.maxWidth = '100vw';
            this.style.position = 'relative';
            this.style.left = '50%';
            this.style.transform = 'translateX(-50%)';
        });
        
        filterSelect.addEventListener('blur', function() {
            // Reset when closed
            this.style.width = '100%';
            this.style.maxWidth = '100%';
            this.style.position = '';
            this.style.left = '';
            this.style.transform = '';
        });
    }
});

/* ===== MOBILE IMAGE SWIPE FUNCTIONALITY ===== */

function setupMobileImageSwipe() {
    const mainImageContainer = document.querySelector('.main-image-container');
    const mainProductImage = document.querySelector('.main-product-image');
    const thumbnails = document.querySelectorAll('.thumbnail');
    const lightboxImage = document.getElementById('lightbox-image');
    
    if (!mainImageContainer || !mainProductImage) return;
    
    // Only enable on mobile
    if (window.innerWidth > 768) return;
    
    console.log('Setting up mobile swipe functionality');
    
    let touchStartX = 0;
    let touchEndX = 0;
    let currentImageIndex = 0;
    let allImages = [];
    
    // Get all product images
    function getAllImages() {
        const images = [];
        
        // Get main image
        const mainImg = mainProductImage.src;
        if (mainImg) images.push(mainImg);
        
        // Get thumbnail images
        thumbnails.forEach(thumb => {
            const img = thumb.querySelector('img');
            if (img && img.src) images.push(img.src);
        });
        
        return images.filter((img, index, self) => 
            img && self.indexOf(img) === index
        );
    }
    
    allImages = getAllImages();
    if (allImages.length <= 1) return; // No need swipe for single image
    
    // Create swipe indicators (dots)
    function createSwipeIndicators() {
        // Remove existing indicators
        const existingIndicators = document.querySelector('.swipe-indicators');
        if (existingIndicators) existingIndicators.remove();
        
        if (allImages.length <= 1) return;
        
        const indicators = document.createElement('div');
        indicators.className = 'swipe-indicators';
        
        for (let i = 0; i < allImages.length; i++) {
            const dot = document.createElement('div');
            dot.className = 'swipe-dot';
            if (i === 0) dot.classList.add('active');
            indicators.appendChild(dot);
        }
        
        mainImageContainer.appendChild(indicators);
    }
    
    createSwipeIndicators();
    
    // Update indicators
    function updateIndicators(index) {
        const dots = document.querySelectorAll('.swipe-dot');
        dots.forEach((dot, i) => {
            dot.classList.toggle('active', i === index);
        });
    }
    
    // Change image
    function changeImage(index) {
        if (index < 0 || index >= allImages.length) return;
        
        currentImageIndex = index;
        mainProductImage.src = allImages[index];
        
        // Also update thumbnail selection
        thumbnails.forEach((thumb, i) => {
            thumb.classList.toggle('active', i === (index - 1)); // -1 because thumbnails start from second image
        });
        
        updateIndicators(index);
        
        // Add swipe animation
        mainProductImage.classList.add('swipe-transition');
        setTimeout(() => {
            mainProductImage.classList.remove('swipe-transition');
        }, 300);
    }
    
    // Touch events for swipe
    mainImageContainer.addEventListener('touchstart', function(e) {
        touchStartX = e.changedTouches[0].screenX;
    }, { passive: true });
    
    mainImageContainer.addEventListener('touchend', function(e) {
        touchEndX = e.changedTouches[0].screenX;
        handleSwipe();
    }, { passive: true });
    
    function handleSwipe() {
        const swipeThreshold = 50; // Minimum swipe distance in pixels
        
        if (touchEndX < touchStartX - swipeThreshold) {
            // Swipe left - next image
            const nextIndex = (currentImageIndex + 1) % allImages.length;
            changeImage(nextIndex);
        }
        
        if (touchEndX > touchStartX + swipeThreshold) {
            // Swipe right - previous image
            const prevIndex = (currentImageIndex - 1 + allImages.length) % allImages.length;
            changeImage(prevIndex);
        }
    }
    
    // Also handle thumbnail clicks
    thumbnails.forEach((thumb, index) => {
        thumb.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            
            const img = this.querySelector('img');
            if (img && img.src) {
                // Find which image index this is
                const imgIndex = allImages.indexOf(img.src);
                if (imgIndex !== -1) {
                    changeImage(imgIndex);
                }
            }
        });
    });
    
    // Add swipe hint for first-time users
    setTimeout(() => {
        if (!localStorage.getItem('swipeHintShown')) {
            const hint = document.createElement('div');
            hint.className = 'swipe-hint';
            hint.innerHTML = '<i class="fas fa-arrows-left-right"></i> Swipe to see more images';
            mainImageContainer.appendChild(hint);
            
            setTimeout(() => {
                hint.classList.add('fade-out');
                setTimeout(() => hint.remove(), 1000);
            }, 3000);
            
            localStorage.setItem('swipeHintShown', 'true');
        }
    }, 1000);
    
    // Handle orientation change
    window.addEventListener('resize', function() {
        if (window.innerWidth <= 768) {
            allImages = getAllImages();
            createSwipeIndicators();
            updateIndicators(currentImageIndex);
        }
    });
}

// Initialize when DOM is loaded
document.addEventListener('DOMContentLoaded', function() {
    // Wait a bit for product images to load
    setTimeout(setupMobileImageSwipe, 500);
    
    // Also run when images are loaded
    const mainImage = document.querySelector('.main-product-image');
    if (mainImage) {
        mainImage.addEventListener('load', setupMobileImageSwipe);
    }
});
/* ===== MOBILE IMAGE LIGHTBOX WITH SWIPE ===== */

function setupMobileLightbox() {
    const mainImage = document.querySelector('.main-product-image');
    const thumbnails = document.querySelectorAll('.thumbnail');
    const lightbox = document.querySelector('.lightbox');
    const lightboxImage = document.getElementById('lightbox-image');
    const closeLightbox = document.querySelector('.close-lightbox');
    const lightboxPrev = document.querySelector('.lightbox-nav.prev');
    const lightboxNext = document.querySelector('.lightbox-nav.next');
    
    if (!mainImage || !lightbox || !lightboxImage) return;
    
    // Collect all images
    let allImages = [];
    let currentLightboxIndex = 0;
    
    function getAllImages() {
        const images = [];
        
        // Get main image
        if (mainImage.src) images.push(mainImage.src);
        
        // Get thumbnail images
        thumbnails.forEach(thumb => {
            const img = thumb.querySelector('img');
            if (img && img.src) images.push(img.src);
        });
        
        return images.filter((img, index, self) => 
            img && self.indexOf(img) === index
        );
    }
    
    // Open lightbox on image click (mobile only)
    if (window.innerWidth <= 768) {
        mainImage.style.cursor = 'zoom-in';
        
        mainImage.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            
            allImages = getAllImages();
            if (allImages.length === 0) return;
            
            // Find which image we clicked
            currentLightboxIndex = allImages.indexOf(this.src);
            if (currentLightboxIndex === -1) currentLightboxIndex = 0;
            
            // Show lightbox
            lightboxImage.src = allImages[currentLightboxIndex];
            lightbox.classList.add('active');
            document.body.style.overflow = 'hidden'; // Prevent background scroll
            
            // Update image counter
            updateLightboxCounter();
            
            console.log('Mobile lightbox opened');
        });
    }
    
    // Close lightbox
    if (closeLightbox) {
        closeLightbox.addEventListener('click', function() {
            lightbox.classList.remove('active');
            document.body.style.overflow = '';
        });
    }
    
    // Close on overlay click
    lightbox.addEventListener('click', function(e) {
        if (e.target === lightbox || e.target.classList.contains('lightbox-overlay')) {
            lightbox.classList.remove('active');
            document.body.style.overflow = '';
        }
    });
    
    // Lightbox navigation
    if (lightboxPrev) {
        lightboxPrev.addEventListener('click', function(e) {
            e.stopPropagation();
            navigateLightbox(-1);
        });
    }
    
    if (lightboxNext) {
        lightboxNext.addEventListener('click', function(e) {
            e.stopPropagation();
            navigateLightbox(1);
        });
    }
    
    // Lightbox swipe for mobile
    let lightboxTouchStartX = 0;
    
    lightbox.addEventListener('touchstart', function(e) {
        lightboxTouchStartX = e.touches[0].clientX;
    }, { passive: true });
    
    lightbox.addEventListener('touchend', function(e) {
        const touchEndX = e.changedTouches[0].clientX;
        const diff = lightboxTouchStartX - touchEndX;
        const swipeThreshold = 50;
        
        if (diff > swipeThreshold) {
            // Swipe left - next image
            navigateLightbox(1);
        } else if (diff < -swipeThreshold) {
            // Swipe right - previous image
            navigateLightbox(-1);
        }
    }, { passive: true });
    
    function navigateLightbox(direction) {
        if (allImages.length <= 1) return;
        
        currentLightboxIndex = (currentLightboxIndex + direction + allImages.length) % allImages.length;
        lightboxImage.src = allImages[currentLightboxIndex];
        
        // Add transition effect
        lightboxImage.classList.add('lightbox-transition');
        setTimeout(() => {
            lightboxImage.classList.remove('lightbox-transition');
        }, 300);
        
        updateLightboxCounter();
    }
    
    function updateLightboxCounter() {
        const counter = document.querySelector('.image-counter');
        if (counter) {
            counter.textContent = `${currentLightboxIndex + 1} / ${allImages.length}`;
        }
    }
    
    // Also make thumbnails open lightbox
    thumbnails.forEach((thumb, index) => {
        thumb.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            
            if (window.innerWidth <= 768) {
                allImages = getAllImages();
                const img = this.querySelector('img');
                if (img && img.src) {
                    currentLightboxIndex = allImages.indexOf(img.src);
                    if (currentLightboxIndex === -1) currentLightboxIndex = 0;
                    
                    lightboxImage.src = allImages[currentLightboxIndex];
                    lightbox.classList.add('active');
                    document.body.style.overflow = 'hidden';
                    
                    updateLightboxCounter();
                }
            }
        });
    });
    
    // Keyboard navigation for testing
    document.addEventListener('keydown', function(e) {
        if (!lightbox.classList.contains('active')) return;
        
        if (e.key === 'ArrowLeft') {
            navigateLightbox(-1);
        } else if (e.key === 'ArrowRight') {
            navigateLightbox(1);
        } else if (e.key === 'Escape') {
            lightbox.classList.remove('active');
            document.body.style.overflow = '';
        }
    });
    
    // Handle orientation change
    window.addEventListener('resize', function() {
        if (window.innerWidth <= 768) {
            mainImage.style.cursor = 'zoom-in';
        } else {
            mainImage.style.cursor = '';
        }
    });
}

// Initialize
document.addEventListener('DOMContentLoaded', function() {
    setTimeout(setupMobileLightbox, 500);
});

// Add swipe hint to lightbox
function addLightboxSwipeHint() {
    if (window.innerWidth > 768) return;
    if (localStorage.getItem('lightboxSwipeHintShown')) return;
    
    const hint = document.createElement('div');
    hint.className = 'lightbox-swipe-hint';
    hint.innerHTML = '<i class="fas fa-arrows-left-right"></i> Swipe to navigate';
    
    const lightboxContent = document.querySelector('.lightbox-content');
    if (lightboxContent) {
        lightboxContent.appendChild(hint);
        
        // Remove hint after 3 seconds
        setTimeout(() => {
            hint.style.opacity = '0';
            hint.style.transition = 'opacity 0.5s ease';
            setTimeout(() => hint.remove(), 500);
        }, 3000);
        
        localStorage.setItem('lightboxSwipeHintShown', 'true');
    }
}

// Call this when lightbox opens
// Add this inside the lightbox open event:
addLightboxSwipeHint();
/* ===== MOBILE LIGHTBOX WITH SWIPE ===== */

let currentLightboxIndex = 0;
let allProductImages = [];

function openLightbox(imageIndex = 0) {
    const lightbox = document.getElementById('lightbox');
    const lightboxImage = document.getElementById('lightbox-image');
    
    if (!lightbox || !lightboxImage) return;
    
    // Get all product images
    allProductImages = getAllProductImages();
    if (allProductImages.length === 0) return;
    
    currentLightboxIndex = imageIndex;
    lightboxImage.src = allProductImages[currentLightboxIndex];
    
    // Update counters
    updateLightboxCounter();
    
    // Show lightbox
    lightbox.classList.add('active');
    document.body.style.overflow = 'hidden'; // Prevent background scroll
    
    // Add swipe functionality for mobile
    if (window.innerWidth <= 768) {
        setupLightboxSwipe();
    }
}

function closeLightbox() {
    const lightbox = document.getElementById('lightbox');
    if (lightbox) {
        lightbox.classList.remove('active');
        document.body.style.overflow = ''; // Restore scroll
    }
}

function changeLightboxImage(direction) {
    if (allProductImages.length <= 1) return;
    
    currentLightboxIndex = (currentLightboxIndex + direction + allProductImages.length) % allProductImages.length;
    const lightboxImage = document.getElementById('lightbox-image');
    
    if (lightboxImage) {
        lightboxImage.src = allProductImages[currentLightboxIndex];
        updateLightboxCounter();
        
        // Add transition effect
        lightboxImage.classList.add('lightbox-transition');
        setTimeout(() => {
            lightboxImage.classList.remove('lightbox-transition');
        }, 300);
    }
}

function getAllProductImages() {
    const images = [];
    
    // Get main image
    const mainImage = document.querySelector('.main-product-image');
    if (mainImage && mainImage.src) {
        images.push(mainImage.src);
    }
    
    // Get thumbnail images
    const thumbnails = document.querySelectorAll('.thumbnail img');
    thumbnails.forEach(img => {
        if (img && img.src && !images.includes(img.src)) {
            images.push(img.src);
        }
    });
    
    return images;
}

function updateLightboxCounter() {
    const currentIndex = document.getElementById('current-index');
    const totalImages = document.getElementById('total-images');
    
    if (currentIndex) {
        currentIndex.textContent = currentLightboxIndex + 1;
    }
    
    if (totalImages) {
        totalImages.textContent = allProductImages.length;
    }
}

function setupLightboxSwipe() {
    const lightbox = document.getElementById('lightbox');
    if (!lightbox) return;
    
    let touchStartX = 0;
    let touchStartY = 0;
    
    // Remove any existing listeners to avoid duplicates
    lightbox.removeEventListener('touchstart', handleTouchStart);
    lightbox.removeEventListener('touchend', handleTouchEnd);
    
    function handleTouchStart(e) {
        touchStartX = e.touches[0].clientX;
        touchStartY = e.touches[0].clientY;
    }
    
    function handleTouchEnd(e) {
        if (!lightbox.classList.contains('active')) return;
        
        const touchEndX = e.changedTouches[0].clientX;
        const touchEndY = e.changedTouches[0].clientY;
        
        const diffX = touchStartX - touchEndX;
        const diffY = touchStartY - touchEndY;
        
        // Only handle horizontal swipes (not vertical scrolls)
        if (Math.abs(diffX) > Math.abs(diffY) && Math.abs(diffX) > 50) {
            if (diffX > 0) {
                // Swipe left - next image
                changeLightboxImage(1);
            } else {
                // Swipe right - previous image
                changeLightboxImage(-1);
            }
        }
    }
    
    lightbox.addEventListener('touchstart', handleTouchStart, { passive: true });
    lightbox.addEventListener('touchend', handleTouchEnd, { passive: true });
}

// Make main image clickable on mobile
function setupMobileImageClick() {
    const mainImage = document.querySelector('.main-product-image');
    const thumbnails = document.querySelectorAll('.thumbnail');
    
    if (!mainImage) return;
    
    // Only on mobile
    if (window.innerWidth > 768) return;
    
    // Make image look clickable
    mainImage.style.cursor = 'zoom-in';
    
    // Click to open lightbox
    mainImage.addEventListener('click', function(e) {
        e.preventDefault();
        e.stopPropagation();
        openLightbox(0);
    });
    
    // Thumbnails click
    thumbnails.forEach((thumb, index) => {
        thumb.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            openLightbox(index + 1); // +1 because main image is index 0
        });
    });
}

// Initialize when page loads
document.addEventListener('DOMContentLoaded', function() {
    // Setup mobile image click
    setupMobileImageClick();
    
    // Also handle window resize
    window.addEventListener('resize', function() {
        if (window.innerWidth <= 768) {
            setupMobileImageClick();
        }
    });
    
    // Close lightbox with Escape key
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
            closeLightbox();
        }
    });
});
/* ===== MINIMAL MOBILE LIGHTBOX FIX ===== */

function setupMobileLightboxTap() {
    const mainImage = document.querySelector('.main-product-image');
    const lightbox = document.getElementById('lightbox');
    
    if (!mainImage || !lightbox) return;
    
    // Only enable on mobile
    if (window.innerWidth > 768) return;
    
    console.log('Setting up mobile tap-to-enlarge');
    
    // Make image look clickable
    mainImage.style.cursor = 'zoom-in';
    
    // Click to open lightbox
    mainImage.addEventListener('click', function(e) {
        e.preventDefault();
        e.stopPropagation();
        
        console.log('Opening lightbox on mobile');
        
        // Get all images
        const allImages = getAllProductImages();
        if (allImages.length === 0) return;
        
        // Set lightbox image to current image
        const lightboxImage = document.getElementById('lightbox-image');
        if (lightboxImage) {
            lightboxImage.src = this.src;
        }
        
        // Show lightbox
        lightbox.classList.add('active');
        document.body.style.overflow = 'hidden';
        
        // Add mobile swipe
        setupLightboxSwipe();
    });
    
    // Also make thumbnails open lightbox
    const thumbnails = document.querySelectorAll('.thumbnail');
    thumbnails.forEach((thumb, index) => {
        thumb.addEventListener('click', function(e) {
            if (window.innerWidth > 768) return; // Desktop behavior unchanged
            
            e.preventDefault();
            e.stopPropagation();
            
            const img = this.querySelector('img');
            if (img && img.src) {
                const lightboxImage = document.getElementById('lightbox-image');
                if (lightboxImage) {
                    lightboxImage.src = img.src;
                }
                lightbox.classList.add('active');
                document.body.style.overflow = 'hidden';
                setupLightboxSwipe();
            }
        });
    });
}

function getAllProductImages() {
    const images = [];
    const mainImage = document.querySelector('.main-product-image');
    const thumbnails = document.querySelectorAll('.thumbnail img');
    
    if (mainImage && mainImage.src) images.push(mainImage.src);
    thumbnails.forEach(img => {
        if (img && img.src && !images.includes(img.src)) {
            images.push(img.src);
        }
    });
    
    return images;
}

function setupLightboxSwipe() {
    const lightbox = document.getElementById('lightbox');
    if (!lightbox) return;
    
    let touchStartX = 0;
    const allImages = getAllProductImages();
    let currentIndex = 0;
    
    // Find current image index
    const lightboxImage = document.getElementById('lightbox-image');
    if (lightboxImage && lightboxImage.src) {
        currentIndex = allImages.indexOf(lightboxImage.src);
        if (currentIndex === -1) currentIndex = 0;
    }
    
    function handleTouchStart(e) {
        touchStartX = e.touches[0].clientX;
    }
    
    function handleTouchEnd(e) {
        const touchEndX = e.changedTouches[0].clientX;
        const diff = touchStartX - touchEndX;
        const swipeThreshold = 50;
        
        if (Math.abs(diff) > swipeThreshold && allImages.length > 1) {
            if (diff > 0) {
                // Swipe left - next image
                currentIndex = (currentIndex + 1) % allImages.length;
            } else {
                // Swipe right - previous image
                currentIndex = (currentIndex - 1 + allImages.length) % allImages.length;
            }
            
            if (lightboxImage) {
                lightboxImage.src = allImages[currentIndex];
                lightboxImage.classList.add('swipe-transition');
                setTimeout(() => {
                    lightboxImage.classList.remove('swipe-transition');
                }, 300);
            }
        }
    }
    
    // Remove old listeners first
    lightbox.removeEventListener('touchstart', handleTouchStart);
    lightbox.removeEventListener('touchend', handleTouchEnd);
    
    // Add new listeners
    lightbox.addEventListener('touchstart', handleTouchStart, { passive: true });
    lightbox.addEventListener('touchend', handleTouchEnd, { passive: true });
}

// Close lightbox function (make sure it exists)
function closeLightbox() {
    const lightbox = document.getElementById('lightbox');
    if (lightbox) {
        lightbox.classList.remove('active');
        document.body.style.overflow = '';
    }
}

// Change lightbox image function (make sure it exists)
function changeLightboxImage(direction) {
    const lightboxImage = document.getElementById('lightbox-image');
    const allImages = getAllProductImages();
    
    if (!lightboxImage || allImages.length <= 1) return;
    
    // Find current index
    let currentIndex = allImages.indexOf(lightboxImage.src);
    if (currentIndex === -1) currentIndex = 0;
    
    // Change index
    currentIndex = (currentIndex + direction + allImages.length) % allImages.length;
    lightboxImage.src = allImages[currentIndex];
    
    // Add transition
    lightboxImage.classList.add('swipe-transition');
    setTimeout(() => {
        lightboxImage.classList.remove('swipe-transition');
    }, 300);
}

// Initialize
document.addEventListener('DOMContentLoaded', function() {
    // Setup mobile tap
    if (window.innerWidth <= 768) {
        setTimeout(setupMobileLightboxTap, 500);
    }
    
    // Handle resize
    window.addEventListener('resize', function() {
        if (window.innerWidth <= 768) {
            setupMobileLightboxTap();
        }
    });
    
    // Make sure closeLightbox is accessible globally
    window.closeLightbox = closeLightbox;
    window.changeLightboxImage = changeLightboxImage;
});

